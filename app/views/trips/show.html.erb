<h1>trips#show</h1>

<%= @trip.name %>
<br>
<%= @trip.description %>
<br>
<% total = 0 %>
<h4><%= total %> assigned events:</h4>
<ul>
  <% @trip.events.each do |event| %>
    <% total += 1  %>
    <li>
      <a href="/events/<%=event.id%>"><%=event.name%></a>
      <%= link_to 'remove', "/trips/#{@trip.id}?eventid=#{event.id}", method: :post %>
    </li>
  <% end %>
</ul>
<% if @trip.user_id == current_user.id %>
<h3>add event to trip?</h3>
  <%= form_with(model: @trip, local: true) do |f| %>
  <%= f.select :event_ids, options_from_collection_for_select(Event.all, 'id', 'name') %>
  <%= f.submit "Assign"%>
  <% end %>
<%end%>
<% if current_user.id == @trip.user_id %>
<%= link_to 'Edit trip', edit_trip_path(@trip) %>
<%= link_to 'Delete trip Forever', trip_path(@trip),
        method: :delete,
        data: { confirm: 'Are you sure?! No one else will be able to use your cool trip!' } %>
<% end %>
